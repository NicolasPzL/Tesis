{"ast":null,"code":"// src/services/api.js\nimport axios from 'axios';\n\n// Usar variable de entorno es más flexible (ej. REACT_APP_API_URL)\n// Si no está definida, usa localhost:5000 como fallback\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n/**\r\n * Sube un archivo al backend.\r\n * @param {File} file - El objeto File a subir.\r\n * @param {function} onUploadProgress - Callback para manejar el progreso.\r\n * @returns {Promise<object>} - Promesa que resuelve con los datos de respuesta (incluye filepath, columns).\r\n * @throws {Error} - Lanza error si la subida falla.\r\n */\nexport const uploadFile = async (file, onUploadProgress) => {\n  const formData = new FormData();\n  formData.append('file', file);\n  console.log(\"Uploading file:\", file.name); // Log\n  try {\n    const response = await axios.post(`${API_BASE_URL}/api/upload`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      onUploadProgress // Pasar el callback a axios\n    });\n    console.log(\"Upload successful:\", response.data); // Log\n    // La respuesta ahora incluye 'columns' además de filepath, etc.\n    return response.data;\n  } catch (error) {\n    console.error(\"Error in uploadFile service:\", error.response || error.message);\n    // Re-lanzar el error para que el componente lo maneje y muestre mensaje\n    throw error;\n  }\n};\n\n/**\r\n * Solicita el análisis de datos al backend.\r\n * @param {string} filepath - La ruta del archivo en el servidor.\r\n * @param {string[]} selectedColumns - Array de nombres de columnas seleccionadas.\r\n * @returns {Promise<object>} - Promesa que resuelve con los datos de respuesta (incluye results, plots).\r\n * @throws {Error} - Lanza error si el análisis falla o no hay columnas.\r\n */\nexport const analyzeData = async (filepath, selectedColumns) => {\n  if (!filepath) {\n    throw new Error(\"Filepath is required for analysis.\");\n  }\n  if (!selectedColumns || !Array.isArray(selectedColumns) || selectedColumns.length === 0) {\n    throw new Error(\"At least one column must be selected for analysis.\");\n  }\n  console.log(\"Requesting analysis for:\", filepath, \"with columns:\", selectedColumns); // Log\n  try {\n    const response = await axios.post(`${API_BASE_URL}/api/analyze`, {\n      filepath: filepath,\n      selected_columns: selectedColumns // Enviar columnas seleccionadas\n    });\n    console.log(\"Analysis successful:\", response.data); // Log\n    // La respuesta ahora incluye 'results' y 'plots'\n    return response.data;\n  } catch (error) {\n    console.error(\"Error in analyzeData service:\", error.response || error.message);\n    // Re-lanzar el error para que el componente lo maneje\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","uploadFile","file","onUploadProgress","formData","FormData","append","console","log","name","response","post","headers","data","error","message","analyzeData","filepath","selectedColumns","Error","Array","isArray","length","selected_columns"],"sources":["C:/7mo Semestre/Proyecto de Grado/Web_App/Frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nimport axios from 'axios';\r\n\r\n// Usar variable de entorno es más flexible (ej. REACT_APP_API_URL)\r\n// Si no está definida, usa localhost:5000 como fallback\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n/**\r\n * Sube un archivo al backend.\r\n * @param {File} file - El objeto File a subir.\r\n * @param {function} onUploadProgress - Callback para manejar el progreso.\r\n * @returns {Promise<object>} - Promesa que resuelve con los datos de respuesta (incluye filepath, columns).\r\n * @throws {Error} - Lanza error si la subida falla.\r\n */\r\nexport const uploadFile = async (file, onUploadProgress) => {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n\r\n  console.log(\"Uploading file:\", file.name); // Log\r\n  try {\r\n      const response = await axios.post(`${API_BASE_URL}/api/upload`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n        onUploadProgress // Pasar el callback a axios\r\n      });\r\n      console.log(\"Upload successful:\", response.data); // Log\r\n      // La respuesta ahora incluye 'columns' además de filepath, etc.\r\n      return response.data;\r\n  } catch (error) {\r\n      console.error(\"Error in uploadFile service:\", error.response || error.message);\r\n      // Re-lanzar el error para que el componente lo maneje y muestre mensaje\r\n      throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Solicita el análisis de datos al backend.\r\n * @param {string} filepath - La ruta del archivo en el servidor.\r\n * @param {string[]} selectedColumns - Array de nombres de columnas seleccionadas.\r\n * @returns {Promise<object>} - Promesa que resuelve con los datos de respuesta (incluye results, plots).\r\n * @throws {Error} - Lanza error si el análisis falla o no hay columnas.\r\n */\r\nexport const analyzeData = async (filepath, selectedColumns) => {\r\n  if (!filepath) {\r\n      throw new Error(\"Filepath is required for analysis.\");\r\n  }\r\n  if (!selectedColumns || !Array.isArray(selectedColumns) || selectedColumns.length === 0) {\r\n      throw new Error(\"At least one column must be selected for analysis.\");\r\n  }\r\n\r\n  console.log(\"Requesting analysis for:\", filepath, \"with columns:\", selectedColumns); // Log\r\n  try {\r\n      const response = await axios.post(`${API_BASE_URL}/api/analyze`, {\r\n         filepath: filepath,\r\n         selected_columns: selectedColumns // Enviar columnas seleccionadas\r\n      });\r\n      console.log(\"Analysis successful:\", response.data); // Log\r\n      // La respuesta ahora incluye 'results' y 'plots'\r\n      return response.data;\r\n  } catch (error) {\r\n      console.error(\"Error in analyzeData service:\", error.response || error.message);\r\n       // Re-lanzar el error para que el componente lo maneje\r\n      throw error;\r\n  }\r\n};"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA;AACA,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;;AAE7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAOC,IAAI,EAAEC,gBAAgB,KAAK;EAC1D,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC;EAE7BK,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEN,IAAI,CAACO,IAAI,CAAC,CAAC,CAAC;EAC3C,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,GAAGd,YAAY,aAAa,EAAEO,QAAQ,EAAE;MACxEQ,OAAO,EAAE;QAAE,cAAc,EAAE;MAAsB,CAAC;MAClDT,gBAAgB,CAAC;IACnB,CAAC,CAAC;IACFI,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEE,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC;IAClD;IACA,OAAOH,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZP,OAAO,CAACO,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAACJ,QAAQ,IAAII,KAAK,CAACC,OAAO,CAAC;IAC9E;IACA,MAAMD,KAAK;EACf;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAME,WAAW,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,eAAe,KAAK;EAC9D,IAAI,CAACD,QAAQ,EAAE;IACX,MAAM,IAAIE,KAAK,CAAC,oCAAoC,CAAC;EACzD;EACA,IAAI,CAACD,eAAe,IAAI,CAACE,KAAK,CAACC,OAAO,CAACH,eAAe,CAAC,IAAIA,eAAe,CAACI,MAAM,KAAK,CAAC,EAAE;IACrF,MAAM,IAAIH,KAAK,CAAC,oDAAoD,CAAC;EACzE;EAEAZ,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAES,QAAQ,EAAE,eAAe,EAAEC,eAAe,CAAC,CAAC,CAAC;EACrF,IAAI;IACA,MAAMR,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,GAAGd,YAAY,cAAc,EAAE;MAC9DoB,QAAQ,EAAEA,QAAQ;MAClBM,gBAAgB,EAAEL,eAAe,CAAC;IACrC,CAAC,CAAC;IACFX,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEE,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC;IACpD;IACA,OAAOH,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZP,OAAO,CAACO,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAACJ,QAAQ,IAAII,KAAK,CAACC,OAAO,CAAC;IAC9E;IACD,MAAMD,KAAK;EACf;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}