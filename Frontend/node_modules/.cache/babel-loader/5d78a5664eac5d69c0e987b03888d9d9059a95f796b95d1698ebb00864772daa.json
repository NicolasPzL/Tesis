{"ast":null,"code":"// src/services/api.js\nimport axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\nexport const uploadFile = async (file, onUploadProgress) => {\n  const formData = new FormData();\n  formData.append('file', file);\n  console.log(\"Service: Uploading file:\", file.name);\n  try {\n    const response = await axios.post(`${API_BASE_URL}/api/upload`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      onUploadProgress\n    });\n    console.log(\"Service: Upload successful, response data:\", response.data);\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    console.error(\"Service: Error in uploadFile:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message);\n    throw error;\n  }\n};\nexport const analyzeData = async (filepath, selectedCleanedColumns, truthColumnName = \"Fraud\") => {\n  // Default 'Fraud'\n  if (!filepath) throw new Error(\"Filepath is required for analysis.\");\n  if (!selectedCleanedColumns || !Array.isArray(selectedCleanedColumns) || selectedCleanedColumns.length === 0) {\n    throw new Error(\"At least one cleaned column must be provided for analysis.\");\n  }\n  console.log(\"Service: Requesting analysis for:\", filepath, \"with cleaned columns:\", selectedCleanedColumns, \"and TRUTH COLUMN to be used by backend:\", truthColumnName);\n  try {\n    const response = await axios.post(`${API_BASE_URL}/api/analyze`, {\n      filepath: filepath,\n      selected_columns: selectedCleanedColumns,\n      truth_column_name: truthColumnName // Enviar nombre de la columna de verdad\n    });\n    console.log(\"Service: Analysis successful, response data:\", response.data);\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    console.error(\"Service: Error in analyzeData:\", ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","uploadFile","file","onUploadProgress","formData","FormData","append","console","log","name","response","post","headers","data","error","_error$response","_error$response$data","message","analyzeData","filepath","selectedCleanedColumns","truthColumnName","Error","Array","isArray","length","selected_columns","truth_column_name","_error$response2","_error$response2$data"],"sources":["C:/7mo Semestre/Proyecto de Grado/Web_App/Frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\nexport const uploadFile = async (file, onUploadProgress) => {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  console.log(\"Service: Uploading file:\", file.name);\r\n  try {\r\n      const response = await axios.post(`${API_BASE_URL}/api/upload`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n        onUploadProgress\r\n      });\r\n      console.log(\"Service: Upload successful, response data:\", response.data);\r\n      return response.data;\r\n  } catch (error) {\r\n      console.error(\"Service: Error in uploadFile:\", error.response?.data?.error || error.message);\r\n      throw error;\r\n  }\r\n};\r\n\r\nexport const analyzeData = async (filepath, selectedCleanedColumns, truthColumnName = \"Fraud\") => { // Default 'Fraud'\r\n  if (!filepath) throw new Error(\"Filepath is required for analysis.\");\r\n  if (!selectedCleanedColumns || !Array.isArray(selectedCleanedColumns) || selectedCleanedColumns.length === 0) {\r\n      throw new Error(\"At least one cleaned column must be provided for analysis.\");\r\n  }\r\n\r\n  console.log(\"Service: Requesting analysis for:\", filepath, \r\n              \"with cleaned columns:\", selectedCleanedColumns,\r\n              \"and TRUTH COLUMN to be used by backend:\", truthColumnName);\r\n  try {\r\n      const response = await axios.post(`${API_BASE_URL}/api/analyze`, {\r\n         filepath: filepath,\r\n         selected_columns: selectedCleanedColumns,\r\n         truth_column_name: truthColumnName // Enviar nombre de la columna de verdad\r\n      });\r\n      console.log(\"Service: Analysis successful, response data:\", response.data);\r\n      return response.data;\r\n  } catch (error) {\r\n      console.error(\"Service: Error in analyzeData:\", error.response?.data?.error || error.message);\r\n      throw error;\r\n  }\r\n};"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAE7E,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAOC,IAAI,EAAEC,gBAAgB,KAAK;EAC1D,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC;EAC7BK,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEN,IAAI,CAACO,IAAI,CAAC;EAClD,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,GAAGd,YAAY,aAAa,EAAEO,QAAQ,EAAE;MACxEQ,OAAO,EAAE;QAAE,cAAc,EAAE;MAAsB,CAAC;MAClDT;IACF,CAAC,CAAC;IACFI,OAAO,CAACC,GAAG,CAAC,4CAA4C,EAAEE,QAAQ,CAACG,IAAI,CAAC;IACxE,OAAOH,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAC,eAAA,EAAAC,oBAAA;IACZT,OAAO,CAACO,KAAK,CAAC,+BAA+B,EAAE,EAAAC,eAAA,GAAAD,KAAK,CAACJ,QAAQ,cAAAK,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBF,IAAI,cAAAG,oBAAA,uBAApBA,oBAAA,CAAsBF,KAAK,KAAIA,KAAK,CAACG,OAAO,CAAC;IAC5F,MAAMH,KAAK;EACf;AACF,CAAC;AAED,OAAO,MAAMI,WAAW,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,sBAAsB,EAAEC,eAAe,GAAG,OAAO,KAAK;EAAE;EAClG,IAAI,CAACF,QAAQ,EAAE,MAAM,IAAIG,KAAK,CAAC,oCAAoC,CAAC;EACpE,IAAI,CAACF,sBAAsB,IAAI,CAACG,KAAK,CAACC,OAAO,CAACJ,sBAAsB,CAAC,IAAIA,sBAAsB,CAACK,MAAM,KAAK,CAAC,EAAE;IAC1G,MAAM,IAAIH,KAAK,CAAC,4DAA4D,CAAC;EACjF;EAEAf,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEW,QAAQ,EAC7C,uBAAuB,EAAEC,sBAAsB,EAC/C,yCAAyC,EAAEC,eAAe,CAAC;EACvE,IAAI;IACA,MAAMX,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,GAAGd,YAAY,cAAc,EAAE;MAC9DsB,QAAQ,EAAEA,QAAQ;MAClBO,gBAAgB,EAAEN,sBAAsB;MACxCO,iBAAiB,EAAEN,eAAe,CAAC;IACtC,CAAC,CAAC;IACFd,OAAO,CAACC,GAAG,CAAC,8CAA8C,EAAEE,QAAQ,CAACG,IAAI,CAAC;IAC1E,OAAOH,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAc,gBAAA,EAAAC,qBAAA;IACZtB,OAAO,CAACO,KAAK,CAAC,gCAAgC,EAAE,EAAAc,gBAAA,GAAAd,KAAK,CAACJ,QAAQ,cAAAkB,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBf,IAAI,cAAAgB,qBAAA,uBAApBA,qBAAA,CAAsBf,KAAK,KAAIA,KAAK,CAACG,OAAO,CAAC;IAC7F,MAAMH,KAAK;EACf;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}